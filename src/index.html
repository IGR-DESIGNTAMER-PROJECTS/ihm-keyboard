<!doctype html>
<head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8" />
    <link rel="stylesheet" href="css/style.css" />
    <script
        defer
        src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"
    ></script>
    <script>
        document.addEventListener("alpine:init", () => {
            var templates = document.querySelectorAll("svg template");
            var el, template, attribs, attrib, count, child, content;
            for (var i = 0; i < templates.length; i++) {
                el = templates[i];
                template = el.ownerDocument.createElement("template");
                el.parentNode.insertBefore(template, el);
                attribs = el.attributes;
                count = attribs.length;
                while (count-- > 0) {
                    attrib = attribs[count];
                    template.setAttribute(attrib.name, attrib.value);
                    el.removeAttribute(attrib.name);
                }
                el.parentNode.removeChild(el);
                content = template.content;
                while ((child = el.firstChild)) {
                    content.appendChild(child);
                }
            }
        });
    </script>
    <script src="js/code.js"></script>
</head>
<body x-data="{app: new App()}">
    <svg id="main">
        <template x-for="k in app.keyboard.getKeys()" :key="k.id">
            <g>
                <rect
                    x-bind:x="k.x - 25"
                    x-bind:y="k.y - 25"
                    width="50"
                    height="50"
                    fill="none"
                    stroke="black"
                />
                <text
                    x-text="k.label"
                    fill="red"
                    x-bind:x="k.x"
                    x-bind:y="k.y"
                />
            </g>
        </template>
    </svg>
    <div id="ui">
        <div id="top">
            <button @click="app.keyboard.addKey()">Add key</button>
            <button @click="app.keyboard.clear()">Clear</button>
        </div>
        <div id="side">
            <button>Side</button>
        </div>
        <div id="layers">
            <button>Layers</button>
        </div>
    </div>
</body>

<script></script>
